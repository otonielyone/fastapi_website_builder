{% extends "template.html" %}

{% block head %}
    <link rel="stylesheet" href="/static/css/main.css">
    <link rel="stylesheet" href="/static/css/dashboard.css">

    <!-- Google Analytics Tracking Code -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-BLW8B5PNHE"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-BLW8B5PNHE');
    </script>
{% endblock %}

{% block body %}
<div class="container mx-auto p-4 bg-gradient-to-r from-blue-100 to-blue-200 min-h-screen">
    <h1 class="text-4xl font-bold text-center text-gray-800 mb-8">Google Analytics Dashboard</h1>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <div class="card">
            <h2 class="text-2xl font-semibold">Total Users</h2>
            <p class="text-3xl font-bold">{{ total_users }}</p>
        </div>
        <div class="card">
            <h2 class="text-2xl font-semibold">Sessions</h2>
            <p class="text-3xl font-bold">{{ sessions }}</p>
        </div>
        <div class="card">
            <h2 class="text-2xl font-semibold">Bounce Rate</h2>
            <p class="text-3xl font-bold">{{ bounce_rate }}%</p>
        </div>
        <div class="card">
            <h2 class="text-2xl font-semibold">Average Session Duration</h2>
            <p class="text-3xl font-bold">{{ avg_session_duration }} seconds</p>
        </div>
        <div class="card">
            <h2 class="text-2xl font-semibold">New Users</h2>
            <p class="text-3xl font-bold">{{ new_users }}</p>
        </div>
        <div class="card">
            <h2 class="text-2xl font-semibold">Conversions</h2>
            <p class="text-3xl font-bold">{{ conversions }}</p>
        </div>

        <div class="card">
          <h2 class="text-2xl font-semibold">Real-Time User Data (Last 30 Minutes)</h2>
          <table>
              <tr>
                  <th>Page Title</th>
                  <th>Page Path</th>
                  <th>Active Users</th>
              </tr>
              {% if real_time_users and real_time_users|length > 0 %}
                  {% for user in real_time_users %}
                  <tr>
                      <td>{{ user.page_title }}</td>
                      <td>{{ user.page_path }}</td>
                      <td>{{ user.active_users }}</td>
                  </tr>
                  {% endfor %}
              {% else %}
                  <tr>
                      <td colspan="3" style="text-align:center;">No data available</td>
                  </tr>
              {% endif %}
          </table>
      </div>
      
      

        <!-- Add more metrics as needed -->
    </div>
</div>
{% endblock %}
