<!DOCTYPE html>
<html>
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>{% block title %}{% endblock %} - Tools</title>
    <!-- Bootstrap CSS -->
    <link type="text/css" rel="stylesheet" href="/static/bootstrap.min.css" />
    <!-- Custom CSS -->
    <link type="text/css" rel="stylesheet" href="/static/styles.css" />
    
<!-- Add this inside your header or menu-bar in template.html -->
    
    {% block head %}{% endblock %}
</head>
<body>

    <!-- Main Header -->
    <header class="site-header">
        {% block header %}
        <!-- Default navigation menu can be provided here if needed -->
        {% endblock %}
    </header>

    <!-- Main Content -->
    <main>
        {% block body %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-column">
                <h4 class="footer-heading">BROWSE</h4>
                <nav class="footer-nav">
                    <ul>
                        <li><a href="/" class="nav-item current"><span class="nav-item-text">HOME</span></a></li>
                        <li><a href="/buying" class="nav-item"><span class="nav-item-text">BUYING</span></a></li>
                        <li><a href="/rentals" class="nav-item"><span class="nav-item-text">RENTALS</span></a></li>
                        <li><a href="/resources" class="nav-item"><span class="nav-item-text">RESOURCES</span></a></li>
                        <li><a href="/contact" class="nav-item"><span class="nav-item-text">CONTACT</span></a></li>
                    </ul>
                </nav>
            </div>
            <div class="footer-column">
                <h4 class="footer-heading">CONTACT</h4>
                <div class="footer-info">
                    <p class="footer-text"><span class="contact-title">Real Estate Agent, REALTORÂ®</span></p>
                    <p class="footer-text"><span class="contact-name">Otoniel (Toni) Yone</span></p>
                    <p class="footer-text"><span class="contact-email">toni@yone.realtor</span></p>
                    <p class="footer-text"><span class="contact-phone">1-703-596-2121</span></p>
                </div>
            </div>
            <div class="footer-column">
                <img src="/static/icons/realtor1.png" alt="Realtor" class="footer-image">
            </div>
            <div class="footer-column">
                <img src="/static/icons/united.svg" alt="United Logo" class="footer-image">
            </div>
        </div>
    </footer>

    <!-- jQuery and Bootstrap JS -->
    <script src="/static/jquery.min.js"></script>
    <script src="/static/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var hamburgerMenu = document.querySelector('.hamburger-menu');
            var menuBar = document.querySelector('.menu-bar');
            var mobileMenu = document.querySelector('.mobile-menu');

            // Function to update visibility based on conditions
            function updateVisibility() {
                var isMobileView = window.innerWidth <= 768;
                var isLandscapeMode = window.innerHeight <= 500 && window.innerWidth > window.innerHeight;
                var shouldShowHamburger = isMobileView || isLandscapeMode;

                var menuBarVisible = menuBar && menuBar.offsetParent !== null;
                var mobileMenuVisible = mobileMenu && mobileMenu.classList.contains('active');

                if (hamburgerMenu) {
                    if (shouldShowHamburger && !menuBarVisible && !mobileMenuVisible) {
                        hamburgerMenu.classList.add('show'); // Show via class
                        hamburgerMenu.classList.remove('hide'); // Ensure hide class is removed
                    } else {
                        hamburgerMenu.classList.add('hide'); // Hide via class
                        hamburgerMenu.classList.remove('show'); // Ensure show class is removed
                    }
                }
            }

            // Toggle mobile menu visibility
            function toggleMobileMenu(event) {
                event.stopPropagation();
                var isActive = mobileMenu.classList.toggle('active');
                updateVisibility();
            }

            // Close mobile menu
            function closeMobileMenu() {
                if (mobileMenu.classList.contains('active')) {
                    mobileMenu.classList.remove('active');
                    updateVisibility();
                }
            }

            // Handle clicks outside mobile menu to close it
            function handleDocumentClick(event) {
                if (!mobileMenu.contains(event.target) && !hamburgerMenu.contains(event.target)) {
                    closeMobileMenu();
                }
            }

            // Prevent click propagation within mobile menu
            function handleMobileMenuClick(event) {
                event.stopPropagation();
                closeMobileMenu();
            }

            // Initialize event listeners and update visibility on load and resize
            if (hamburgerMenu && mobileMenu) {
                updateVisibility();

                hamburgerMenu.addEventListener('click', toggleMobileMenu);
                document.addEventListener('click', handleDocumentClick);
                mobileMenu.addEventListener('click', handleMobileMenuClick);

                window.addEventListener('resize', updateVisibility);

                // Observe changes in the menu bar to update visibility
                const observer = new MutationObserver(updateVisibility);
                if (menuBar) {
                    observer.observe(menuBar, { attributes: true, attributeFilter: ['style'] });
                }
            }
        });


    </script>