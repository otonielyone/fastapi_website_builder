<!DOCTYPE html>
<html>
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>{% block title %}{% endblock %} - Tools</title>
    <!-- Bootstrap CSS -->
    <link type="text/css" rel="stylesheet" href="/static/bootstrap.min.css" />
    <!-- Custom CSS -->
    <link type="text/css" rel="stylesheet" href="/static/styles.css" />
    
<!-- Add this inside your header or menu-bar in template.html -->
    
    {% block head %}{% endblock %}
</head>
<body>

    <!-- Main Header -->
    <header class="site-header">
        {% block header %}{% endblock %}
    </header>

    <!-- Main Content -->
    <main>
        {% block body %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-column">
                <h4 class="footer-heading">BROWSE</h4>
                <nav class="footer-nav">
                    <ul>
                        <li><a href="/" class="nav-item current"><span class="nav-item-text">HOME</span></a></li>
                        <li><a href="/buying" class="nav-item"><span class="nav-item-text">BUYING</span></a></li>
                        <li><a href="/rentals" class="nav-item"><span class="nav-item-text">RENTALS</span></a></li>
                        <li><a href="/resources" class="nav-item"><span class="nav-item-text">RESOURCES</span></a></li>
                        <li><a href="/contact" class="nav-item"><span class="nav-item-text">CONTACT</span></a></li>
                    </ul>
                </nav>
            </div>
            <div class="footer-column">
                <h4 class="footer-heading">CONTACT</h4>
                <div class="footer-info">
                    <p class="footer-text"><span class="contact-title">Real Estate Agent, REALTORÂ®</span></p>
                    <p class="footer-text"><span class="contact-name">Otoniel (Toni) Yone</span></p>
                    <p class="footer-text"><span class="contact-email">toni@yone.realtor</span></p>
                    <p class="footer-text"><span class="contact-phone">1-703-596-2121</span></p>
                </div>
            </div>
            <div class="footer-column">
                <img src="/static/icons/realtor1.png" alt="Realtor" class="footer-image">
            </div>
            <div class="footer-column">
                <img src="/static/icons/united.svg" alt="United Logo" class="footer-image">
            </div>
        </div>
    </footer>

    <!-- jQuery and Bootstrap JS -->
    <script src="/static/jquery.min.js"></script>
    <script src="/static/bootstrap.bundle.min.js"></script>
    <script>
document.addEventListener('DOMContentLoaded', function() {
    var hamburgerMenu = document.querySelector('.hamburger-menu');
    var menuBar = document.querySelector('.menu-bar');
    var mobileMenu = document.querySelector('.mobile-menu');
    var menuItems = document.querySelectorAll('.menu-item');

    // Function to update visibility and style based on conditions
    function updateVisibility() {
        var isMobileView = window.innerWidth <= 768;
        var isLandscapeMode = window.innerHeight <= 500 && window.innerWidth > window.innerHeight;
        var shouldShowHamburger = isMobileView || isLandscapeMode;

        var mobileMenuVisible = mobileMenu && mobileMenu.classList.contains('active');

        if (hamburgerMenu) {
            if (mobileMenuVisible) {
                // Always hide hamburger menu if mobile menu is active
                hamburgerMenu.classList.add('hide');
                hamburgerMenu.classList.remove('show');
                hamburgerMenu.classList.add('active');
                hamburgerMenu.style.color = ''; // Restore font color
            } else {
                // Show hamburger menu based on conditions if mobile menu is not active
                if (shouldShowHamburger) {
                    hamburgerMenu.classList.add('show');
                    hamburgerMenu.classList.remove('hide');
                    hamburgerMenu.classList.remove('active');
                } else {
                    hamburgerMenu.classList.add('hide');
                    hamburgerMenu.classList.remove('show');
                    hamburgerMenu.classList.remove('active');
                }
                hamburgerMenu.style.color = ''; // Restore font color
            }
        }

        // Adjust z-index for menu items
        if (mobileMenuVisible) {
            menuItems.forEach(function(item) {
                item.style.zIndex = '2000'; // Ensure menu items are on top
            });
        } else {
            menuItems.forEach(function(item) {
                item.style.zIndex = ''; // Restore default z-index if needed
            });
        }
    }

    // Toggle mobile menu visibility
    function toggleMobileMenu(event) {
        event.stopPropagation();
        var isActive = mobileMenu.classList.toggle('active');
        updateVisibility(); // Ensure visibility is updated after toggling
    }

    // Close mobile menu
    function closeMobileMenu() {
        if (mobileMenu.classList.contains('active')) {
            mobileMenu.classList.remove('active');
            updateVisibility(); // Ensure visibility is updated after closing
        }
    }

    // Close mobile menu on any click
    function handleAnyClick(event) {
        // Only close the menu if the click is outside the mobile menu and hamburger menu
        if (mobileMenu.classList.contains('active') && !mobileMenu.contains(event.target) && !hamburgerMenu.contains(event.target)) {
            closeMobileMenu();
        }
    }

    // Ensure click events on menu items work correctly
    function handleMenuItemClick(event) {
        console.log('Menu item clicked:', event.target);
        // Optional: Add additional logic if needed
    }

    // Initialize event listeners and update visibility on load and resize
    if (hamburgerMenu && mobileMenu) {
        updateVisibility();

        // Toggle mobile menu on hamburger click
        hamburgerMenu.addEventListener('click', toggleMobileMenu);

        // Close mobile menu when clicking anywhere outside
        document.addEventListener('click', handleAnyClick);

        // Update visibility on window resize
        window.addEventListener('resize', updateVisibility);

        // Observe changes in the menu bar to update visibility
        const observer = new MutationObserver(updateVisibility);
        if (menuBar) {
            observer.observe(menuBar, { attributes: true, attributeFilter: ['style'] });
        }
        
        // Add click event listeners to menu items
        menuItems.forEach(function(item) {
            item.addEventListener('click', handleMenuItemClick);
        });
    }
});

</script>